{"version":3,"sources":["../src/attendance_modal.js"],"names":["init","window","console","log","on","ModalFactory","create","type","types","SAVE_CANCEL","title","body","then","modal","setSaveButtonText","show","hide","webcamElement","document","getElementById","canvasElement","snapSoundElement","webcam","Webcam","start","result","catch","err","stop","location","href","attr"],"mappings":"wNAAA,OACA,OACA,O,mDAEO,GAAMA,CAAAA,CAAI,CAAG,UAAM,CACxBC,MAAM,CAACC,OAAP,CAAeC,GAAf,CAAmB,sBAAnB,EACA,cAAE,eAAF,EAAmBC,EAAnB,CAAsB,OAAtB,CAA+B,UAAY,CACzCH,MAAM,CAACC,OAAP,CAAeC,GAAf,YAEAE,UAAaC,MAAb,CAAoB,CAClBC,IAAI,CAAEF,UAAaG,KAAb,CAAmBC,WADP,CAElBC,KAAK,CAAE,gBAFW,CAGlBC,IAAI,0dAHc,CAApB,EAUGC,IAVH,CAUQ,SAAUC,CAAV,CAAiB,CACvBA,CAAK,CAACC,iBAAN,CAAwB,cAAxB,EAEAD,CAAK,CAACE,IAAN,GACA,cAAE,eAAF,EAAmBC,IAAnB,GAJuB,GAMjBC,CAAAA,CAAa,CAAGC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CANC,CAOjBC,CAAa,CAAGF,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAPC,CAQjBE,CAAgB,CAAGH,QAAQ,CAACC,cAAT,CAAwB,WAAxB,CARF,CASnBG,CAAM,CAAG,GAAIC,UAAJ,CACXN,CADW,CAEX,MAFW,CAGXG,CAHW,CAIXC,CAJW,CATU,CAgBvB,cAAE,eAAF,EAAmBjB,EAAnB,CAAsB,OAAtB,CAA+B,UAAY,CACzCkB,CAAM,CACHE,KADH,GAEGZ,IAFH,CAEQ,SAACa,CAAD,CAAY,CAChBxB,MAAM,CAACC,OAAP,CAAeC,GAAf,CAAmB,gBAAnB,CAAqCsB,CAArC,CACD,CAJH,EAKGC,KALH,CAKS,SAACC,CAAD,CAAS,CACd1B,MAAM,CAACC,OAAP,CAAeC,GAAf,CAAmBwB,CAAnB,CACD,CAPH,CAQD,CATD,EAUA,cAAE,cAAF,EAAkBvB,EAAlB,CAAqB,OAArB,CAA8B,UAAY,CACxCkB,CAAM,CAACM,IAAP,GACA3B,MAAM,CAAC4B,QAAP,CAAgBC,IAAhB,CAAuB,cAAED,QAAF,EAAYE,IAAZ,CAAiB,MAAjB,CACxB,CAHD,CAID,CAxCD,CAyCD,CA5CD,CA6CD,CA/CM,C","sourcesContent":["import $ from \"jquery\";\nimport ModalFactory from \"core/modal_factory\";\nimport Webcam from \"./webcam\";\n\nexport const init = () => {\n  window.console.log(\"we have been started\");\n  $(\".action-modal\").on(\"click\", function () {\n    window.console.log(`working`);\n\n    ModalFactory.create({\n      type: ModalFactory.types.SAVE_CANCEL,\n      title: \"Turn on webcam\",\n      body: `\n      <p>webcam will be turned on to take video and image input for your attendance</p>\n      <button id='start-webcam' class=\"btn btn-primary\">Start Webcam</button>\n      <button id='stop-webcam' class=\"btn btn-secondary\">Cancel</button>\n      <video id=\"webcam\" autoplay playsinline width=\"640\" height=\"480\"></video>\n      <canvas id=\"canvas\" class=\"d-none\"></canvas>\n      <audio id=\"snapSound\" src=\"audio/snap.wav\" preload = \"auto\"></audio>`,\n    }).then(function (modal) {\n      modal.setSaveButtonText(\"Start Webcam\");\n\n      modal.show();\n      $(\".modal-footer\").hide();\n\n      const webcamElement = document.getElementById(\"webcam\");\n      const canvasElement = document.getElementById(\"canvas\");\n      const snapSoundElement = document.getElementById(\"snapSound\");\n      let webcam = new Webcam(\n        webcamElement,\n        \"user\",\n        canvasElement,\n        snapSoundElement\n      );\n\n      $(\"#start-webcam\").on(\"click\", function () {\n        webcam\n          .start()\n          .then((result) => {\n            window.console.log(\"webcam started\", result);\n          })\n          .catch((err) => {\n            window.console.log(err);\n          });\n      });\n      $(\"#stop-webcam\").on(\"click\", function () {\n        webcam.stop();\n        window.location.href = $(location).attr(\"href\");\n      });\n    });\n  });\n};\n"],"file":"attendance_modal.min.js"}